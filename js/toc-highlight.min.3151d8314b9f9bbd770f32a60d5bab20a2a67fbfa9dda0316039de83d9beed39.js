document.addEventListener("DOMContentLoaded",function(){const d=document.querySelectorAll(".floating-toc .toc-link"),l=document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]"),e=document.getElementById("floating-toc"),h=document.getElementById("toc-handle");console.log("TOC Links:",d.length),console.log("Sections:",l.length);function u(){let e=window.scrollY;console.log("Scroll position:",e),l.forEach(t=>{t.offsetTop<=e+100&&(console.log("Current section:",t.id),d.forEach(e=>{e.getAttribute("href")==="#"+t.id?(console.log("Activating link:",e.getAttribute("href")),e.classList.add("active"),e.style.backgroundColor="yellow"):(e.classList.remove("active"),e.style.backgroundColor="")}))})}window.addEventListener("scroll",u,{passive:!0}),u();let t=!1,r,c,s,a,i=null;h.addEventListener("mousedown",m),window.addEventListener("mousemove",n),window.addEventListener("mouseup",p);function m(o){t=!0,r=s=o.clientX,c=a=o.clientY,e.style.willChange="transform",window.addEventListener("mousemove",n,{passive:!1})}function n(e){if(!t)return;e.preventDefault(),s=e.clientX,a=e.clientY,i||(i=requestAnimationFrame(f))}function f(){const t=s-r,n=a-c;e.style.transform=`translate(${t}px, ${n}px)`,i=null}function p(){if(!t)return;t=!1,e.style.willChange="auto";const i=window.getComputedStyle(e),s=new DOMMatrix(i.transform);e.style.left=`${e.offsetLeft+s.m41}px`,e.style.top=`${e.offsetTop+s.m42}px`,e.style.transform="none",window.removeEventListener("mousemove",n,{passive:!1}),o()}function o(){const t=e.getBoundingClientRect(),n=window.innerWidth-t.width,s=window.innerHeight-t.height;t.left<0&&(e.style.left="0px"),t.top<0&&(e.style.top="0px"),t.left>n&&(e.style.left=`${n}px`),t.top>s&&(e.style.top=`${s}px`)}window.addEventListener("resize",o),o()})