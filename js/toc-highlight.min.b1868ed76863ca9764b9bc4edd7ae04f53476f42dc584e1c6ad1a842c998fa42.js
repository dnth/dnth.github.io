document.addEventListener("DOMContentLoaded",function(){const c=document.querySelectorAll(".floating-toc .toc-link"),o=document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]"),e=document.getElementById("floating-toc"),d=document.getElementById("toc-handle");console.log("TOC Links:",c.length),console.log("Sections:",o.length);function s(){let e=window.scrollY;console.log("Scroll position:",e),o.forEach(t=>{t.offsetTop<=e+100&&(console.log("Current section:",t.id),c.forEach(e=>{e.getAttribute("href")==="#"+t.id?(console.log("Activating link:",e.getAttribute("href")),e.classList.add("active"),e.style.backgroundColor="yellow"):(e.classList.remove("active"),e.style.backgroundColor="")}))})}window.addEventListener("scroll",s),s();let t=!1,i,a,r,n;d.addEventListener("mousedown",u),document.addEventListener("mousemove",h),document.addEventListener("mouseup",m);function u(s){t=!0,i=s.clientX,a=s.clientY,r=e.offsetLeft,n=e.offsetTop,e.style.willChange="left, top"}function h(s){if(!t)return;s.preventDefault();const o=s.clientX-i,c=s.clientY-a;e.style.left=`${r+o}px`,e.style.top=`${n+c}px`}function m(){t=!1,e.style.willChange="auto"}function l(){const t=e.getBoundingClientRect(),n=window.innerWidth-t.width,s=window.innerHeight-t.height;t.left<0&&(e.style.left="0px"),t.top<0&&(e.style.top="0px"),t.left>n&&(e.style.left=`${n}px`),t.top>s&&(e.style.top=`${s}px`)}window.addEventListener("resize",l),l()})