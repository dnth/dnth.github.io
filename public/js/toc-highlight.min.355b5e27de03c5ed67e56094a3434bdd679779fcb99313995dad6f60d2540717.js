document.addEventListener("DOMContentLoaded",function(){const r=document.querySelectorAll(".floating-toc .toc-link"),c=document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]"),e=document.getElementById("floating-toc"),f=document.getElementById("toc-handle");let t=e.querySelector(".toc-title");t||(t=document.createElement("div"),t.className="toc-title",t.textContent="☰ Table of Contents",e.insertBefore(t,e.firstChild));const n=document.createElement("button");n.textContent="▼",n.style.cssText="background: none; border: none; font-size: 16px; cursor: pointer; margin-left: 10px;",t.appendChild(n);const o=document.createElement("div");for(o.id="toc-content";e.childNodes.length>1;)o.appendChild(e.childNodes[1]);e.appendChild(o);let s=!0;n.addEventListener("click",function(){s=!s,o.style.display=s?"block":"none",n.textContent=s?"▼":"▲"}),console.log("TOC Links:",r.length),console.log("Sections:",c.length);function a(){let e=window.scrollY;console.log("Scroll position:",e),c.forEach(t=>{t.offsetTop<=e+100&&(console.log("Current section:",t.id),r.forEach(e=>{e.getAttribute("href")==="#"+t.id?(console.log("Activating link:",e.getAttribute("href")),e.classList.add("active"),e.style.backgroundColor="yellow"):(e.classList.remove("active"),e.style.backgroundColor="")}))})}window.addEventListener("scroll",a),a();let i=!1,l,d,u,h;f.addEventListener("mousedown",p),document.addEventListener("mousemove",g),document.addEventListener("mouseup",v);function p(t){i=!0,l=t.clientX,d=t.clientY,u=e.offsetLeft,h=e.offsetTop,e.style.willChange="left, top"}function g(t){if(!i)return;t.preventDefault();const n=t.clientX-l,s=t.clientY-d;e.style.left=`${u+n}px`,e.style.top=`${h+s}px`}function v(){i=!1,e.style.willChange="auto"}function m(){const t=e.getBoundingClientRect(),o=window.innerWidth-t.width,i=window.innerHeight-(s?t.height:n.offsetHeight);t.left<0&&(e.style.left="0px"),t.top<0&&(e.style.top="0px"),t.left>o&&(e.style.left=`${o}px`),t.top>i&&(e.style.top=`${i}px`)}window.addEventListener("resize",m),m()})